{% extends "standard-form.njk" %}
{% from "input/macro.njk" import govukInput %}

{% set title = 'What is your name?' if data.isLicenceForYou else 'What is the person\'s name?' %}

{% set errorMap = {
        'first-name': {
            'string.empty': { ref: '#first-name', text: 'Enter the licence holder’s first name'},
            'string.min': { ref: '#first-name', text: 'The first name must contain at least 2 letters' },
            'string.max': { ref: '#first-name', text: 'The first name must not be longer than 100 letters' },
            'string.forbidden': { ref: '#first-name', text: 'The first name must only contain letters' }
        },
        'last-name': {
            'string.empty': { ref: '#last-name', text: 'Enter the licence holder’s last name'},
            'string.min': { ref: '#last-name', text: 'The last name must contain at least 2 letters' },
            'string.max': { ref: '#last-name', text: 'The last name must not be longer than 100 letters' },
            'string.forbidden': { ref: '#last-name', text: 'The last name must only contain letters' }
        }
    }
%}

{% block pageContent %}
    {% if not data.isLicenceForYou %}
      <p class="govuk-body-m">Take care to spell their name correctly.</p>
    {% endif %}

    {{ govukInput({
      label: {
        text: "First name"
      },
      id: "first-name",
      name: "first-name",
      hint: { text: "Do not use abbreviations or nicknames" },
      value: payload['first-name'],
      classes: "govuk-input--width-20",
      autocomplete: 'given-name',
      attributes: { maxlength: 100 },
      errorMessage: { text: 'Enter the first name' } if error['first-name']
    }) }}

    {{ govukInput({
      label: {
        text: "Last name"
      },
      id: "last-name",
      name: "last-name",
      value: payload['last-name'],
      autocomplete: 'family-name',
      classes: "govuk-input--width-20",
      attributes: { maxlength: 100 },
      errorMessage: { text: 'Enter the last name' } if error['last-name']
    }) }}

{% endblock %}
