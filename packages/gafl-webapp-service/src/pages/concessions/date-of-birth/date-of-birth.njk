{% extends "standard-form.njk" %}

{% from "date-input/macro.njk" import govukDateInput %}
{% set title = mssgs.dob_title_you if data.isLicenceForYou else mssgs.dob_title_other %}

{%
    set errorMap = {
        'date-of-birth': {
            'date.format': { ref: '#date-of-birth-day', text: mssgs.dob_error_format },
            'date.max': { ref: '#date-of-birth-day', text: mssgs.dob_error_format_max },
            'date.min': { ref: '#date-of-birth-day', text: mssgs.dob_error_format_min }
        }
    }
%}

{% set dateInputItems = [
    {
      name: mssgs.dob_day,
      classes: "govuk-input--width-2",
      value: payload['date-of-birth-day'],
      attributes: { maxlength : 2 }
    },
    {
      name: mssgs.dob_month,
      classes: "govuk-input--width-2",
      value: payload['date-of-birth-month'],
      attributes: { maxlength : 2 }
    },
    {
      name: mssgs.dob_year,
      classes: "govuk-input--width-4",
      value: payload['date-of-birth-year'],
      attributes: { maxlength : 4 }
    }
  ]
%}

{% block pageContent %}
    {{ govukDateInput({
      id: "date-of-birth",
      namePrefix: "date-of-birth",
      items: dateInputItems,
      errorMessage: { text: mssgs.dob_error } if error,
      hint: {
        text: mssgs.dob_entry_hint
      }
    }) }}
    <div class="govuk-body-m">{{ mssgs.dob_privacy_link_prefix }} <a class="govuk-link" href="{{ _uri.privacy }}">{{ mssgs.dob_privacy_link }}</a>.</div>

    <a class="govuk-link" href="/buy/date-of-birth?lang={{ altLang }}">{{ mssgs.view_page_in_alt_lang }}</a>
{% endblock %}
