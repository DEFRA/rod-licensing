{% extends "layout.njk" %}

{% from "button/macro.njk" import govukButton %}
{% from "summary-list/macro.njk" import govukSummaryList %}
{% from "warning-text/macro.njk" import govukWarningText %}

{% set title = mssgs.multibuy_view_licences_title %}
{% block pageTitle %}{{ title }}{{ mssgs.gov_uk }}{% endblock %}

{% block content %}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        <h1 class="govuk-heading-l"> {{ mssgs.multibuy_view_licences_title }} </h1>

        {% if data.duplicate === true %}
          {{ govukWarningText({
            text: mssgs.multibuy_licences_warning_duplicate,
            iconFallbackText: "Warning"
          }) }}
        {% endif %}

          {% for licence in data.licences %}

              {% set licenceInfo = [
                { key: { text: 'Licence holder' }, value: { text: licence.licenceHolder } }, 
                { key: { text: 'Type' }, value: { text: licence.type } }, 
                { key: { text: 'Length' }, value: { text: licence.length } }, 
                { key: { text: 'Start' }, value: { text: licence.start } }, 
                { key: { text: 'Price' }, value: { text: 'Â£' + licence.price } }
                ]
              %}

                {{ govukSummaryList({
                  rows: licenceInfo
                }) }}

                {{ govukButton({
                  text: "Change",
                  href: "/buy/set-current-permission?permissionIndex=" + licence.index,
                  attributes: { 'aria-label': "Change licence" },
                  classes: "govuk-button--secondary"
                })}}

            {% endfor %}
    </div>
</div>


<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
            {{ govukButton({
                text: "Continue",
                href: "/buy/conditions"
            })}}
    </div>
</div>

{% endblock %}
